<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Elemental Bejeweled - Match-3 Puzzle Game</title>
    <link rel="stylesheet" href="styles.css" />
    <meta name="description" content="Play the ultimate elemental match-3 puzzle game with beautiful gems and smooth gameplay">
    <meta name="keywords" content="elemental, bejeweled, match3, puzzle, gems, elements">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgPGRlZnM+CiAgICA8IS0tIEdyYWRpZW50IGRlZmluaXRpb25zIGZvciBlYWNoIGVsZW1lbnQgLS0+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImZpcmUiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojRkY0NTAwO3N0b3Atb3BhY2l0eToxIiAvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNEQzE0M0M7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgCiAgICA8bGluZWFyR3JhZGllbnQgaWQ9IndhdGVyIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6IzFFOTBGRjtzdG9wLW9wYWNpdHk6MSIgLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojNDE2OUUxO3N0b3Atb3BhY2l0eToxIiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIAogICAgPGxpbmVhckdyYWRpZW50IGlkPSJlYXJ0aCIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM4QjQ1MTM7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6I0EwNTIyRDtzdG9wLW9wYWNpdHk6MSIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICAKICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iYWlyIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6Izg3Q0VFQjtzdG9wLW9wYWNpdHk6MSIgLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojQjBFMEU2O3N0b3Atb3BhY2l0eToxIiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIAogICAgPGxpbmVhckdyYWRpZW50IGlkPSJsaWdodG5pbmciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojRkZENzAwO3N0b3Atb3BhY2l0eToxIiAvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkE1MDA7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgCiAgICA8bGluZWFyR3JhZGllbnQgaWQ9Im5hdHVyZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiMzMkNEMzI7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6IzIyOEIyMjtzdG9wLW9wYWNpdHk6MSIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICAKICAgIDxsaW5lYXJHcmFkaWVudCBpZD0ibWFnaWMiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojOTkzMkNDO3N0b3Atb3BhY2l0eToxIiAvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM4QTJCRTI7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgCiAgICA8IS0tIE92ZXJhbGwgZ2VtIGdyYWRpZW50IC0tPgogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJnZW1HbG93IiBjeD0iNTAlIiBjeT0iMzAlIiByPSI3MCUiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojZmZmZmZmO3N0b3Atb3BhY2l0eTowLjgiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdHlsZT0ic3RvcC1jb2xvcjojZmZmZmZmO3N0b3Atb3BhY2l0eTowLjMiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6IzAwMDAwMDtzdG9wLW9wYWNpdHk6MC4yIiAvPgogICAgPC9yYWRpYWxHcmFkaWVudD4KICA8L2RlZnM+CiAgCiAgPCEtLSBCYWNrZ3JvdW5kIGNpcmNsZSAtLT4KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0iIzFhMWEzYSIgc3Ryb2tlPSIjNDQ0IiBzdHJva2Utd2lkdGg9IjEiLz4KICA8IS0tIE1haW4gZ2VtIHNoYXBlIC0tPgogIDxwb2x5Z29uIHBvaW50cz0iMTYsMyAyNCwxMCAyNCwyMiAxNiwyOSA4LDIyIDgsMTAiIGZpbGw9InVybCgjbGlnaHRuaW5nKSIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjAuNSIgb3BhY2l0eT0iMC45Ii8+CiAgPCEtLSBFbGVtZW50YWwgc2VnbWVudHMgLS0+CiAgPHBvbHlnb24gcG9pbnRzPSIxNiwzIDI0LDEwIDE2LDE2IiBmaWxsPSJ1cmwoI2ZpcmUpIiBvcGFjaXR5PSIwLjgiLz4KICA8cG9seWdvbiBwb2ludHM9IjI0LDEwIDI0LDIyIDE2LDE2IiBmaWxsPSJ1cmwoI3dhdGVyKSIgb3BhY2l0eT0iMC44Ii8+CiAgPHBvbHlnb24gcG9pbnRzPSIyNCwyMiAxNiwyOSAxNiwxNiIgZmlsbD0idXJsKCNlYXJ0aCkiIG9wYWNpdHk9IjAuOCIvPgogIDxwb2x5Z29uIHBvaW50cz0iMTYsMjkgOCwyMiAxNiwxNiIgZmlsbD0idXJsKCNuYXR1cmUpIiBvcGFjaXR5PSIwLjgiLz4KICA8cG9seWdvbiBwb2ludHM9IjgsMjIgOCwxMCAxNiwxNiIgZmlsbD0idXJsKCNhaXIpIiBvcGFjaXR5PSIwLjgiLz4KICA8cG9seWdvbiBwb2ludHM9IjgsMTAgMTYsMyAxNiwxNiIgZmlsbD0idXJsKCNtYWdpYykiIG9wYWNpdHk9IjAuOCIvPgogIDwhLS0gR2VtIGhpZ2hsaWdodCBhbmQgZGVwdGggLS0+CiAgPHBvbHlnb24gcG9pbnRzPSIxNiwzIDI0LDEwIDI0LDIyIDE2LDI5IDgsMjIgOCwxMCIgZmlsbD0idXJsKCNnZW1HbG93KSIgb3BhY2l0eT0iMC42Ii8+CiAgPCEtLSBUb3AgZmFjZXQgaGlnaGxpZ2h0IC0tPgogIDxwb2x5Z29uIHBvaW50cz0iMTYsMyAyMCw3IDE2LDExIDEyLDciIGZpbGw9IiNmZmZmZmYiIG9wYWNpdHk9IjAuOSIvPgogIDwhLS0gU2lkZSBmYWNldHMgLS0+CiAgPHBvbHlnb24gcG9pbnRzPSIyMCw3IDI0LDEwIDIwLDE0IDE2LDExIiBmaWxsPSIjZmZmZmZmIiBvcGFjaXR5PSIwLjMiLz4KICA8cG9seWdvbiBwb2ludHM9IjEyLDcgMTYsMTEgMTIsMTQgOCwxMCIgZmlsbD0iI2ZmZmZmZiIgb3BhY2l0eT0iMC4zIi8+CiAgPCEtLSBMaWdodG5pbmcgYm9sdCBhY2NlbnQgaW4gY2VudGVyIC0tPgogIDxwYXRoIGQ9Ik0gMTQsMTIgTCAxOCwxMiBMIDE2LDggTCAxOCw4IEwgMTQsMTYgTCAxNiwxNiBMIDE0LDIwIEwgMTgsMTQgTCAxNiwxNCBMIDE4LDE4IFoiIAogICAgICAgIGZpbGw9IiNGRkQ3MDAiIHN0cm9rZT0iI0ZGQTUwMCIgc3Ryb2tlLXdpZHRoPSIwLjMiIG9wYWNpdHk9IjAuOSIgdHJhbnNmb3JtPSJzY2FsZSgwLjYpIHRyYW5zbGF0ZSgxMCw2KSIvPgo8L3N2Zz4=">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon.svg">
    <meta name="theme-color" content="#1a1a3a">
    
    <!-- Preload key resources -->
    <link rel="preload" href="script.js" as="script">
  </head>
  <body>
    <div class="game-container">
      <!-- Game Title -->
      <h1 class="game-title">⚡ Elemental Bejeweled ⚡</h1>
      <p class="game-subtitle">Match Elements • Score Points • Level Up</p>
      
      <!-- Game Statistics (will be populated by JavaScript) -->
      <div class="game-stats">
        <!-- Stats will be dynamically created by JavaScript -->
      </div>
      
      <!-- Game Board -->
      <div class="game-board" id="gameBoard">
        <!-- Elemental gems will be dynamically generated by JavaScript -->
      </div>
      
      <!-- Game Controls -->
      <div class="game-controls">
        <button class="btn btn-primary" onclick="restartGame()">
          🔄 New Game
        </button>
        <button class="btn btn-secondary" onclick="showInstructions()">
          📜 How to Play
        </button>
        <button class="btn btn-settings" onclick="openSettings()">
          ⚙️ Settings
        </button>
      </div>
      
      <!-- Simplified Instructions -->
      <div id="instructions" class="instructions" style="display: none;">
        <h3>⚡ How to Play Elemental Bejeweled</h3>
        
        <p><strong>🎯 Basic Rules:</strong></p>
        <ul>
          <li>🔄 <strong>Swap adjacent gems</strong> to create matches of 3 or more identical elements</li>
          <li>🎯 <strong>Reach target scores</strong> to advance through levels</li>
          <li>💎 <strong>Create bigger matches</strong> for higher scores and combo multipliers</li>
          <li>⚡ <strong>Chain reactions</strong> occur when new gems fall and create more matches</li>
        </ul>
        
        <p><strong>🌍 Elemental Gems:</strong></p>
        <ul>
          <li>🔥 <strong>Fire:</strong> Blazing red-orange gem with fiery energy</li>
          <li>💧 <strong>Water:</strong> Cool blue gem flowing with liquid power</li>
          <li>🌍 <strong>Earth:</strong> Solid brown gem representing stability</li>
          <li>💨 <strong>Air:</strong> Light blue gem with ethereal properties</li>
          <li>⚡ <strong>Lightning:</strong> Golden gem crackling with electricity</li>
          <li>🌿 <strong>Nature:</strong> Green gem full of life and growth</li>
          <li>🔮 <strong>Magic:</strong> Purple gem containing mystical forces</li>
        </ul>
        
        <p><strong>🏆 Scoring System:</strong></p>
        <ul>
          <li>💎 <strong>3-match:</strong> 50 points base score</li>
          <li>💎 <strong>4-match:</strong> 150 points for longer matches</li>
          <li>💎 <strong>5+ match:</strong> 300+ points for massive combinations</li>
          <li>🔥 <strong>Combo Multiplier:</strong> Each cascade increases your multiplier</li>
          <li>🎯 <strong>Level Targets:</strong> Reach the score goal to advance</li>
        </ul>
        
        <p><strong>🕹️ Controls:</strong></p>
        <ul>
          <li>🖱️ <strong>Click to Select:</strong> Click any gem to select it</li>
          <li>🔄 <strong>Click to Swap:</strong> Click an adjacent gem to swap positions</li>
          <li>❌ <strong>Deselect:</strong> Click the same gem again to deselect</li>
          <li>🔄 <strong>New Game:</strong> Restart with a fresh board anytime</li>
        </ul>
      </div>
      
      <!-- Settings Modal -->
      <div id="settingsModal" class="settings-modal" style="display: none;">
        <div class="settings-content">
          <div class="settings-header">
            <h2>⚙️ Game Settings</h2>
            <button class="close-btn" onclick="closeSettings()">✕</button>
          </div>
          
          <div class="settings-body">
            <!-- Audio Settings -->
            <div class="settings-section">
              <h3>🔊 Audio Settings</h3>
              <div class="setting-item">
                <label for="masterVolume">Master Volume</label>
                <input type="range" id="masterVolume" min="0" max="100" value="75" class="volume-slider">
                <span class="volume-value">75%</span>
              </div>
              <div class="setting-item">
                <label for="soundEffects">Sound Effects</label>
                <input type="checkbox" id="soundEffects" checked class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="backgroundMusic">Background Music</label>
                <input type="checkbox" id="backgroundMusic" checked class="toggle-switch">
              </div>
            </div>

            <!-- Visual Settings -->
            <div class="settings-section">
              <h3>👁️ Visual Settings</h3>
              <div class="setting-item">
                <label for="animations">Animations</label>
                <input type="checkbox" id="animations" checked class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="particleEffects">Particle Effects</label>
                <input type="checkbox" id="particleEffects" checked class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="highContrast">High Contrast Mode</label>
                <input type="checkbox" id="highContrast" class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="reducedMotion">Reduced Motion</label>
                <input type="checkbox" id="reducedMotion" class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="boardTheme">Board Theme</label>
                <select id="boardTheme" class="theme-select">
                  <option value="space">🌌 Space (Default)</option>
                  <option value="forest">🌲 Forest</option>
                  <option value="ocean">🌊 Ocean</option>
                  <option value="fire">🔥 Fire</option>
                </select>
              </div>
            </div>

            <!-- Gameplay Settings -->
            <div class="settings-section">
              <h3>🎮 Gameplay Settings</h3>
              <div class="setting-item">
                <label for="difficulty">Difficulty Level</label>
                <select id="difficulty" class="difficulty-select">
                  <option value="easy">😊 Easy</option>
                  <option value="normal" selected>😐 Normal</option>
                  <option value="hard">😤 Hard</option>
                  <option value="expert">🔥 Expert</option>
                </select>
              </div>
              <div class="setting-item">
                <label for="showHints">Show Hints</label>
                <input type="checkbox" id="showHints" checked class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="autoSave">Auto Save Progress</label>
                <input type="checkbox" id="autoSave" checked class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="showComboText">Show Combo Text</label>
                <input type="checkbox" id="showComboText" checked class="toggle-switch">
              </div>
            </div>

            <!-- Display Settings -->
            <div class="settings-section">
              <h3>📱 Display Settings</h3>
              <div class="setting-item">
                <label for="boardSize">Board Size</label>
                <select id="boardSize" class="size-select">
                  <option value="small">📱 Small (320px)</option>
                  <option value="medium">📺 Medium (400px)</option>
                  <option value="large" selected>🖥️ Large (480px)</option>
                  <option value="xlarge">🖥️ Extra Large (560px)</option>
                </select>
              </div>
              <div class="setting-item">
                <label for="fullscreen">Fullscreen Mode</label>
                <input type="checkbox" id="fullscreen" class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="showStats">Show Statistics</label>
                <input type="checkbox" id="showStats" checked class="toggle-switch">
              </div>
            </div>

            <!-- Controls Settings -->
            <div class="settings-section">
              <h3>🕹️ Controls Settings</h3>
              <div class="setting-item">
                <label for="keyboardShortcuts">Keyboard Shortcuts</label>
                <input type="checkbox" id="keyboardShortcuts" checked class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="clickFeedback">Click Feedback</label>
                <input type="checkbox" id="clickFeedback" checked class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="doubleClickSpeed">Double Click Speed</label>
                <input type="range" id="doubleClickSpeed" min="200" max="800" value="400" class="speed-slider">
                <span class="speed-value">Normal</span>
              </div>
            </div>
          </div>
          
          <div class="settings-footer">
            <button class="btn btn-secondary" onclick="resetSettings()">
              🔄 Reset to Defaults
            </button>
            <button class="btn btn-primary" onclick="saveSettings()">
              💾 Save Settings
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Load the main game script -->
    <script src="script.js"></script>
    
    <!-- Enhanced UI functions -->
    <script>
      function showInstructions() {
        const instructions = document.getElementById('instructions');
        if (instructions.style.display === 'none') {
          instructions.style.display = 'block';
          instructions.style.cssText = `
            display: block;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(145deg, rgba(26, 26, 58, 0.98), rgba(13, 13, 26, 0.95));
            border: 3px solid rgba(255, 255, 255, 0.4);
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            color: #f0f0f0;
            box-shadow: 0 25px 50px rgba(0,0,0,0.7);
            backdrop-filter: blur(15px);
            z-index: 1000;
            text-align: left;
            font-family: Georgia, serif;
          `;
          
          // Add close button
          if (!instructions.querySelector('.close-btn')) {
            const closeBtn = document.createElement('button');
            closeBtn.className = 'close-btn';
            closeBtn.innerHTML = '✕';
            closeBtn.style.cssText = `
              position: absolute;
              top: 15px;
              right: 20px;
              background: linear-gradient(145deg, #ff4757, #ff3742);
              border: none;
              color: white;
              font-size: 18px;
              cursor: pointer;
              padding: 8px 12px;
              border-radius: 50%;
              box-shadow: 0 4px 8px rgba(0,0,0,0.3);
              transition: all 0.3s ease;
            `;
            closeBtn.onmouseover = () => {
              closeBtn.style.transform = 'scale(1.1)';
              closeBtn.style.boxShadow = '0 6px 12px rgba(0,0,0,0.4)';
            };
            closeBtn.onmouseout = () => {
              closeBtn.style.transform = 'scale(1)';
              closeBtn.style.boxShadow = '0 4px 8px rgba(0,0,0,0.3)';
            };
            closeBtn.onclick = () => {
              instructions.style.display = 'none';
            };
            instructions.appendChild(closeBtn);
          }
        } else {
          instructions.style.display = 'none';
        }
      }
      
      // Close instructions when clicking outside
      document.addEventListener('click', function(event) {
        const instructions = document.getElementById('instructions');
        if (instructions.style.display === 'block' && 
          !instructions.contains(event.target) && 
          !event.target.classList.contains('btn-secondary')) {
          instructions.style.display = 'none';
        }
      });
      
      // Enhanced performance monitoring
      window.addEventListener('load', function() {
        const loadTime = performance.now();
        console.log(`⚡ Elemental Bejeweled loaded in ${loadTime.toFixed(2)}ms`);
        
        // Add loading animation fade out
        document.body.style.opacity = '0';
        document.body.style.transition = 'opacity 0.5s ease-in';
        setTimeout(() => {
          document.body.style.opacity = '1';
        }, 100);
      });
      
      // Keyboard shortcuts
      document.addEventListener('keydown', function(event) {
        if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') return;
        
        switch(event.key.toLowerCase()) {
          case 'r': if (typeof restartGame !== 'undefined') restartGame(); break;
          case 'h': showInstructions(); break;
        }
      });
    </script>
    
    <style>
      /* Enhanced instructions styling */
      .instructions h3 {
        color: #FFD700;
        margin-bottom: 20px;
        font-size: 1.4em;
        text-align: center;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
      }
      
      .instructions ul {
        margin: 15px 0;
        padding-left: 25px;
      }
      
      .instructions li {
        margin: 10px 0;
        line-height: 1.5;
        font-size: 14px;
      }
      
      .instructions p {
        margin: 15px 0;
        font-weight: bold;
        font-size: 16px;
      }
      
      .instructions p:nth-of-type(1) { color: #87CEEB; }
      .instructions p:nth-of-type(2) { color: #FF69B4; }
      .instructions p:nth-of-type(3) { color: #98FB98; }
      .instructions p:nth-of-type(4) { color: #DDA0DD; }
      
      /* Custom scrollbar for instructions */
      .instructions::-webkit-scrollbar {
        width: 8px;
      }
      
      .instructions::-webkit-scrollbar-track {
        background: rgba(255,255,255,0.1);
        border-radius: 4px;
      }
      
      .instructions::-webkit-scrollbar-thumb {
        background: linear-gradient(145deg, #667eea, #764ba2);
        border-radius: 4px;
      }
      
      .instructions::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(145deg, #764ba2, #667eea);
      }
    </style>
  </body>
</html> 