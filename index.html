<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gems Rush: Divine Teams - Epic Match-3 Adventure</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="src/ui/modals.css" />
    <meta name="description" content="Join the divine battle in Gems Rush: Divine Teams - an epic match-3 puzzle game with celestial gems and team-based gameplay">
    <meta name="keywords" content="gems rush, divine teams, match3, puzzle, celestial gems, team battle">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon.svg">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon.svg">
    <meta name="theme-color" content="#1a1a3a">
    
    <!-- Preload key resources -->
    <link rel="preload" href="src/main.js" as="script" crossorigin>
<script type="module" src="src/main.js"></script>
  </head>
  <body>
    <!-- GLOBAL HOME BUTTON (appears on all screens except main menu) -->
    <button id="homeButton" class="home-button back-to-menu" 
            aria-label="Return to Main Menu" 
            title="Return to Main Menu"
            tabindex="0">
      <span class="home-icon">🏠</span>
    </button>

    <!-- MAIN MENU SCREEN -->
    <main id="mainMenu" class="main-menu" role="main" aria-label="Main Menu">
      <div class="main-menu-content">
        <!-- Animated Background -->
        <div class="menu-background">
          <div class="floating-gems">
            <div class="floating-gem" style="--delay: 0s; --color: #FF4500;">🔥</div>
            <div class="floating-gem" style="--delay: 0.5s; --color: #1E90FF;">💧</div>
            <div class="floating-gem" style="--delay: 1s; --color: #8B4513;">🌍</div>
            <div class="floating-gem" style="--delay: 1.5s; --color: #87CEEB;">💨</div>
            <div class="floating-gem" style="--delay: 2s; --color: #FFD700;">⚡</div>
            <div class="floating-gem" style="--delay: 2.5s; --color: #32CD32;">🌿</div>
            <div class="floating-gem" style="--delay: 3s; --color: #9932CC;">🔮</div>
          </div>
          <div class="particle-field"></div>
          <div class="divine-aura"></div>
        </div>
        
        <!-- Main Title Hero Section -->
        <div class="menu-hero">
          <div class="hero-content">
            <div class="main-title-container">
              <h1 class="main-title">
                <span class="title-line">⚡ GEMS RUSH ⚡</span>
                <span class="title-subtitle">DIVINE TEAMS</span>
              </h1>
              <div class="title-effects">
                <div class="divine-glow"></div>
                <div class="power-rings"></div>
              </div>
            </div>
            <p class="main-tagline">Epic Match-3 Adventure • Divine Powers • Legendary Battles</p>
            
            <!-- Quick Stats Preview -->
            <div class="hero-stats">
              <div class="stat-preview">
                <span class="stat-icon">💎</span>
                <span class="stat-text">7 Divine Gems</span>
              </div>
              <div class="stat-preview">
                <span class="stat-icon">🏆</span>
                <span class="stat-text">4 Epic Modes</span>
              </div>
              <div class="stat-preview">
                <span class="stat-icon">⚔️</span>
                <span class="stat-text">Infinite Realms</span>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Game Mode Selection with Enhanced Layout -->
        <section class="menu-modes" role="region" aria-labelledby="modes-title">
          <div class="modes-header">
            <h2 id="modes-title" class="modes-title">
              <span class="modes-icon">🎮</span>
              Choose Your Destiny
              <span class="modes-underline"></span>
            </h2>
            <p class="modes-subtitle">Select your path to divine mastery</p>
          </div>
          
          <div class="modes-container">
            <div class="modes-grid" role="group" aria-label="Game mode selection">
              <button class="menu-btn mode-normal featured" 
                      aria-label="Normal Mode - Classic divine battles with unlimited time">
                <div class="btn-badge">CLASSIC</div>
                <div class="btn-content">
                  <div class="btn-icon" aria-hidden="true">🎯</div>
                  <div class="btn-title">Normal Mode</div>
                  <div class="btn-desc">Classic divine battles with unlimited time to strategize</div>
                  <div class="btn-difficulty">★☆☆</div>
                </div>
                <div class="btn-glow"></div>
              </button>
              
              <button class="menu-btn mode-time" 
                      aria-label="Time Attack - Race against time for ultimate glory">
                <div class="btn-badge">INTENSE</div>
                <div class="btn-content">
                  <div class="btn-icon" aria-hidden="true">⏱️</div>
                  <div class="btn-title">Time Attack</div>
                  <div class="btn-desc">Race against time for ultimate glory and high scores</div>
                  <div class="btn-difficulty">★★☆</div>
                </div>
                <div class="btn-glow"></div>
              </button>
              
              <button class="menu-btn mode-daily" 
                      aria-label="Daily Divine Quest - Special divine quests that change daily">
                <div class="btn-badge">DAILY</div>
                <div class="btn-content">
                  <div class="btn-icon" aria-hidden="true">📅</div>
                  <div class="btn-title">Daily Divine Quest</div>
                  <div class="btn-desc">Special divine quests that change daily with unique rewards</div>
                  <div class="btn-difficulty">★★☆</div>
                </div>
                <div class="btn-glow"></div>
              </button>
              
              <button class="menu-btn mode-campaign" 
                      aria-label="Divine Conquest - Epic campaign through mystical realms">
                <div class="btn-badge">EPIC</div>
                <div class="btn-content">
                  <div class="btn-icon" aria-hidden="true">⚔️</div>
                  <div class="btn-title">Divine Conquest</div>
                  <div class="btn-desc">Epic campaign through mystical realms and divine challenges</div>
                  <div class="btn-difficulty">★★★</div>
                </div>
                <div class="btn-glow"></div>
              </button>
            </div>
          </div>
        </section>
        
        <!-- Enhanced Game Information -->
        <section class="menu-info" role="region" aria-labelledby="about-title">
          <div class="info-container">
            <div class="info-main">
              <div class="info-section">
                <h3 id="about-title">
                  <span class="info-icon">🌟</span>
                  About Divine Teams
                </h3>
                <p>Master the ancient art of divine gem matching! Unite elemental powers, create epic cascades, and build legendary teams to conquer mystical realms. With 7 unique divine gems, each battle is a strategic masterpiece waiting to unfold.</p>
              </div>
              
              <!-- Divine Gems Preview -->
              <div class="gems-preview">
                <h4>🔮 Divine Gem Powers</h4>
                <div class="gems-showcase">
                  <div class="gem-preview fire" title="Fire - Sacred flames of purification">🔥</div>
                  <div class="gem-preview water" title="Water - Healing waters of life">💧</div>
                  <div class="gem-preview earth" title="Earth - Eternal foundation stone">🌍</div>
                  <div class="gem-preview air" title="Air - Celestial winds of freedom">💨</div>
                  <div class="gem-preview lightning" title="Lightning - Pure divine energy">⚡</div>
                  <div class="gem-preview nature" title="Nature - Life force of creation">🌿</div>
                  <div class="gem-preview magic" title="Magic - Infinite mystical potential">🔮</div>
                </div>
              </div>
            </div>
            
            <!-- Enhanced Features Grid -->
            <div class="info-features">
              <div class="features-grid">
                <div class="feature">
                  <div class="feature-icon">🔗</div>
                  <div class="feature-content">
                    <span class="feature-title">Epic Cascades</span>
                    <span class="feature-text">Chain reactions multiply your divine power</span>
                  </div>
                </div>
                <div class="feature">
                  <div class="feature-icon">🏆</div>
                  <div class="feature-content">
                    <span class="feature-title">Achievements</span>
                    <span class="feature-text">Unlock divine honors and legendary status</span>
                  </div>
                </div>
                <div class="feature">
                  <div class="feature-icon">📊</div>
                  <div class="feature-content">
                    <span class="feature-title">Progress Tracking</span>
                    <span class="feature-text">Monitor your ascension through the realms</span>
                  </div>
                </div>
                <div class="feature">
                  <div class="feature-icon">⚙️</div>
                  <div class="feature-content">
                    <span class="feature-title">Customization</span>
                    <span class="feature-text">Tailor your divine experience perfectly</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
        
        <!-- Enhanced Menu Footer -->
        <footer class="menu-footer" role="contentinfo">
          <div class="footer-content">
            <div class="footer-buttons">
              <button class="footer-btn">
                <span class="footer-icon">📖</span>
                <span class="footer-text">Game Guide</span>
              </button>
              <button class="footer-btn">
                <span class="footer-icon">⚙️</span>
                <span class="footer-text">Settings</span>
              </button>
              <button class="footer-btn">
                <span class="footer-icon">👥</span>
                <span class="footer-text">Credits</span>
              </button>
            </div>
            <div class="footer-version">
              <span>Gems Rush: Divine Teams v1.0</span>
            </div>
          </div>
        </footer>
      </div>
    </main>

    <!-- GAME INTERFACE (Initially Hidden) -->
    <div id="gameInterface" class="game-interface" style="display: none;" role="application" aria-label="Game Interface">
      <!-- NEW: Daily Challenge Badge -->
              <div id="dailyChallengeBadge" class="daily-challenge-badge" style="display: none;">
        📅 Daily Challenge
      </div>

<!-- NEW: Timer Display (for Time Attack mode) -->
     <div id="timerDisplay" class="timer-display" style="display: none;">
      ⏰ <span id="timerValue">--</span>
     </div>

    <!-- NEW: Streak Counter -->
    <div id="streakCounter" class="streak-counter" style="display: none;">
      🔥 Streak: 0
    </div>

    <!-- NEW: Statistics Panel -->
    <div id="statsPanel" class="stats-panel" style="display: none;">
      <h4>📊 Game Stats</h4>
      <div class="stat-line">
        <span>Games:</span>
        <span id="statGames">0</span>
      </div>
      <div class="stat-line">
        <span>Best Score:</span>
        <span id="statBestScore">0</span>
      </div>
      <div class="stat-line">
        <span>Total Score:</span>
        <span id="statTotalScore">0</span>
      </div>
      <div class="stat-line">
        <span>Highest Level:</span>
        <span id="statHighestLevel">1</span>
      </div>
      <div class="stat-line">
        <span>Best Streak:</span>
        <span id="statBestStreak">0</span>
      </div>
    </div>

    <div class="game-container">
      <!-- Game Title -->
      <h1 class="game-title">⚡ Gems Rush: Divine Teams ⚡</h1>
      <p class="game-subtitle">Unite Divine Powers • Rush for Victory • Team Dominance</p>
      
      <!-- NEW: Game Mode Indicator -->
      <div id="gameModeIndicator" class="game-mode-indicator" style="display: none;">
        🎯 Normal Mode
      </div>

      <!-- Game Statistics (will be populated by JavaScript) -->
      <div class="game-stats">
        <!-- Stats will be dynamically created by JavaScript -->
      </div>
      
      <!-- Game Board -->
      <div class="game-board" id="gameBoard">
        <!-- Divine gems will be dynamically generated by JavaScript -->
      </div>
      
      <!-- Game Controls -->
      <div class="game-controls">
        <button class="btn btn-primary" id="restartBtn">
          🔄 New Battle
        </button>
        <button class="btn btn-secondary" id="gameGuideBtn">
          📜 Divine Guide
        </button>
        <!-- NEW: Enhanced controls -->
        <button class="btn btn-hint" id="hintBtn">
          💡 Hint
        </button>
        <button class="btn btn-undo" id="undoBtn">
          ↩️ Undo
        </button>
        <button class="btn btn-settings" id="settingsBtn">
          ⚙️ Settings
        </button>
        <button class="btn btn-menu back-to-menu">
          🏠 Main Menu
        </button>
      </div>


      
      <!-- Simplified Instructions -->
      <div id="instructions" class="instructions" style="display: none;">
        <h3>⚡ How to Play Gems Rush: Divine Teams</h3>
        
        <p><strong>🎯 Divine Battle Rules:</strong></p>
        <ul>
          <li>🔄 <strong>Swap adjacent gems</strong> to create matches of 3 or more identical divine powers</li>
          <li>🎯 <strong>Reach target scores</strong> to advance through divine realms</li>
          <li>💎 <strong>Create bigger matches</strong> for higher scores and divine combo multipliers</li>
          <li>⚡ <strong>Chain reactions</strong> occur when new gems fall and create more celestial matches</li>
          <li>💡 <strong>Use hints</strong> when stuck - they'll show you possible moves</li>
          <li>↩️ <strong>Undo moves</strong> if you make a mistake (limited uses)</li>
        </ul>
        
        <p><strong>🎮 Game Modes:</strong></p>
        <ul>
          <li>🎯 <strong>Normal:</strong> Classic gameplay with unlimited time</li>
          <li>⏱️ <strong>Time Attack:</strong> Score as much as possible in 60 seconds</li>
          <li>📅 <strong>Divine Quest:</strong> Special daily divine quests with themed challenges</li>
        </ul>
        
        <p><strong>🌟 Divine Gem Powers:</strong></p>
        <ul>
          <li>🔥 <strong>Fire:</strong> Blazing divine gem with sacred flames</li>
          <li>💧 <strong>Water:</strong> Sacred waters of divine purification</li>
          <li>🌍 <strong>Earth:</strong> Ancient divine foundation stone</li>
          <li>💨 <strong>Air:</strong> Celestial winds of the heavens</li>
          <li>⚡ <strong>Lightning:</strong> Divine thunderbolt of the gods</li>
          <li>🌿 <strong>Nature:</strong> Sacred life force of creation</li>
          <li>🔮 <strong>Magic:</strong> Pure divine essence and mystical power</li>
        </ul>
        
        <p><strong>🏆 Divine Scoring System:</strong></p>
        <ul>
          <li>💎 <strong>3-match:</strong> 50 divine points</li>
          <li>💎 <strong>4-match:</strong> 150 divine points for holy combinations</li>
          <li>💎 <strong>5+ match:</strong> 300+ divine points for sacred formations</li>
          <li>🔥 <strong>Rush Multiplier:</strong> Each cascade increases your divine power</li>
          <li>🎯 <strong>Realm Targets:</strong> Reach the score goal to ascend divine realms</li>
        </ul>
        
        <p><strong>🕹️ Divine Controls:</strong></p>
        <ul>
          <li>🖱️ <strong>Click to Select:</strong> Choose your divine gem</li>
          <li>🔄 <strong>Click to Swap:</strong> Unite adjacent divine powers</li>
          <li>📱 <strong>Swipe Gestures:</strong> Swipe to move gems on mobile</li>
          <li>❌ <strong>Deselect:</strong> Click the same gem to cancel selection</li>
          <li>🔄 <strong>New Battle:</strong> Start fresh divine combat anytime</li>
        </ul>

        <p><strong>🏅 Achievements & Features:</strong></p>
        <ul>
          <li>🔥 <strong>Streaks:</strong> Build consecutive match streaks for bonus points</li>
          <li>💫 <strong>Power-ups:</strong> Create special gems with 4+ matches</li>
          <li>🏆 <strong>Achievements:</strong> Unlock rewards for special accomplishments</li>
          <li>📊 <strong>Statistics:</strong> Track your progress and improvement</li>
        </ul>
      </div>
      
      <!-- Settings Modal -->
      <div id="settingsModal" class="settings-modal" style="display: none;">
        <div class="settings-content">
          <div class="settings-header">
            <h2>⚙️ Game Settings</h2>
            <button class="close-btn">✕</button>
          </div>
          
          <div class="settings-body">
            <!-- Audio Settings -->
            <div class="settings-section">
              <h3>🔊 Audio Settings</h3>
              <div class="setting-item">
                <label for="masterVolume">Master Volume</label>
                <input type="range" id="masterVolume" min="0" max="100" value="75" class="volume-slider">
                <span class="volume-value">75%</span>
              </div>
              <div class="setting-item">
                <label for="soundEffects">Sound Effects</label>
                <input type="checkbox" id="soundEffects" checked class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="backgroundMusic">Background Music</label>
                <input type="checkbox" id="backgroundMusic" checked class="toggle-switch">
              </div>
            </div>

            <!-- Visual Settings -->
            <div class="settings-section">
              <h3>👁️ Visual Settings</h3>
              <div class="setting-item">
                <label for="animations">Animations</label>
                <input type="checkbox" id="animations" checked class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="particleEffects">Particle Effects</label>
                <input type="checkbox" id="particleEffects" checked class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="highContrast">High Contrast Mode</label>
                <input type="checkbox" id="highContrast" class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="reducedMotion">Reduced Motion</label>
                <input type="checkbox" id="reducedMotion" class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="boardTheme">Board Theme</label>
                <select id="boardTheme" class="theme-select">
                  <option value="space">🌌 Space (Default)</option>
                  <option value="forest">🌲 Forest</option>
                  <option value="ocean">🌊 Ocean</option>
                  <option value="fire">🔥 Fire</option>
                </select>
              </div>
            </div>

            <!-- Gameplay Settings -->
            <div class="settings-section">
              <h3>🎮 Gameplay Settings</h3>
              <div class="setting-item">
                <label for="difficulty">Difficulty Level</label>
                <select id="difficulty" class="difficulty-select">
                  <option value="easy">😊 Easy</option>
                  <option value="normal" selected>😐 Normal</option>
                  <option value="hard">😤 Hard</option>
                  <option value="expert">🔥 Expert</option>
                </select>
              </div>
              <div class="setting-item">
                <label for="showHints">Show Hints</label>
                <input type="checkbox" id="showHints" checked class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="autoSave">Auto Save Progress</label>
                <input type="checkbox" id="autoSave" checked class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="showComboText">Show Combo Text</label>
                <input type="checkbox" id="showComboText" checked class="toggle-switch">
              </div>
            </div>

            <!-- Display Settings -->
            <div class="settings-section">
              <h3>📱 Display Settings</h3>
              <div class="setting-item">
                <label for="boardSize">Board Size</label>
                <select id="boardSize" class="size-select">
                  <option value="small">📱 Small (320px)</option>
                  <option value="medium">📺 Medium (400px)</option>
                  <option value="large" selected>🖥️ Large (480px)</option>
                  <option value="xlarge">🖥️ Extra Large (560px)</option>
                </select>
              </div>
              <div class="setting-item">
                <label for="fullscreen">Fullscreen Mode</label>
                <input type="checkbox" id="fullscreen" class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="showStats">Show Statistics</label>
                <input type="checkbox" id="showStats" checked class="toggle-switch">
              </div>
            </div>

            <!-- Controls Settings -->
            <div class="settings-section">
              <h3>🕹️ Controls Settings</h3>
              <div class="setting-item">
                <label for="keyboardShortcuts">Keyboard Shortcuts</label>
                <input type="checkbox" id="keyboardShortcuts" checked class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="clickFeedback">Click Feedback</label>
                <input type="checkbox" id="clickFeedback" checked class="toggle-switch">
              </div>
              <div class="setting-item">
                <label for="doubleClickSpeed">Double Click Speed</label>
                <input type="range" id="doubleClickSpeed" min="200" max="800" value="400" class="speed-slider">
                <span class="speed-value">Normal</span>
              </div>
            </div>
          </div>
          
          <div class="settings-footer">
            <button class="btn btn-secondary">
              🔄 Reset to Defaults
            </button>
            <button class="btn btn-primary">
              💾 Save Settings
            </button>
          </div>
        </div>
      </div>
    </div>
    </div>

    <!-- Main game script now loaded in head with defer -->
    
    <!-- Enhanced UI functions -->
    <script>
      function showInstructions() {
        const instructions = document.getElementById('instructions');
        if (instructions.style.display === 'none') {
          instructions.style.display = 'block';
          instructions.style.cssText = `
            display: block;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(145deg, rgba(26, 26, 58, 0.98), rgba(13, 13, 26, 0.95));
            border: 3px solid rgba(255, 255, 255, 0.4);
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            color: #f0f0f0;
            box-shadow: 0 25px 50px rgba(0,0,0,0.7);
            backdrop-filter: blur(15px);
            z-index: 1000;
            text-align: left;
            font-family: Georgia, serif;
          `;
          
          // Add close button
          if (!instructions.querySelector('.close-btn')) {
            const closeBtn = document.createElement('button');
            closeBtn.className = 'close-btn';
            closeBtn.innerHTML = '✕';
            closeBtn.style.cssText = `
              position: absolute;
              top: 15px;
              right: 20px;
              background: linear-gradient(145deg, #ff4757, #ff3742);
              border: none;
              color: white;
              font-size: 18px;
              cursor: pointer;
              padding: 8px 12px;
              border-radius: 50%;
              box-shadow: 0 4px 8px rgba(0,0,0,0.3);
              transition: all 0.3s ease;
            `;
            closeBtn.onmouseover = () => {
              closeBtn.style.transform = 'scale(1.1)';
              closeBtn.style.boxShadow = '0 6px 12px rgba(0,0,0,0.4)';
            };
            closeBtn.onmouseout = () => {
              closeBtn.style.transform = 'scale(1)';
              closeBtn.style.boxShadow = '0 4px 8px rgba(0,0,0,0.3)';
            };
            closeBtn.onclick = () => {
              instructions.style.display = 'none';
            };
            instructions.appendChild(closeBtn);
          }
        } else {
          instructions.style.display = 'none';
        }
      }
      
      // Close instructions when clicking outside
      document.addEventListener('click', function(event) {
        const instructions = document.getElementById('instructions');
        if (instructions.style.display === 'block' && 
          !instructions.contains(event.target) && 
          !event.target.classList.contains('btn-secondary')) {
          instructions.style.display = 'none';
        }
      });
      
      // Enhanced performance monitoring
      window.addEventListener('load', function() {
        const loadTime = performance.now();
        console.log(`⚡ Gems Rush: Divine Teams loaded in ${loadTime.toFixed(2)}ms`);
        
        // Add loading animation fade out
        document.body.style.opacity = '0';
        document.body.style.transition = 'opacity 0.5s ease-in';
        setTimeout(() => {
          document.body.style.opacity = '1';
        }, 100);
      });
      
      // Keyboard shortcuts
      document.addEventListener('keydown', function(event) {
        if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') return;
        
        switch(event.key.toLowerCase()) {
          case 'r': if (typeof restartGame !== 'undefined') restartGame(); break;
          case 'h': showInstructions(); break;
        }
      });
    </script>
    
    <style>
      /* Enhanced instructions styling */
      .instructions h3 {
        color: #FFD700;
        margin-bottom: 20px;
        font-size: 1.4em;
        text-align: center;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
      }
      
      .instructions ul {
        margin: 15px 0;
        padding-left: 25px;
      }
      
      .instructions li {
        margin: 10px 0;
        line-height: 1.5;
        font-size: 14px;
      }
      
      .instructions p {
        margin: 15px 0;
        font-weight: bold;
        font-size: 16px;
      }
      
      .instructions p:nth-of-type(1) { color: #87CEEB; }
      .instructions p:nth-of-type(2) { color: #FF69B4; }
      .instructions p:nth-of-type(3) { color: #98FB98; }
      .instructions p:nth-of-type(4) { color: #DDA0DD; }
      
      /* Custom scrollbar for instructions */
      .instructions::-webkit-scrollbar {
        width: 8px;
      }
      
      .instructions::-webkit-scrollbar-track {
        background: rgba(255,255,255,0.1);
        border-radius: 4px;
      }
      
      .instructions::-webkit-scrollbar-thumb {
        background: linear-gradient(145deg, #667eea, #764ba2);
        border-radius: 4px;
      }
      
      .instructions::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(145deg, #764ba2, #667eea);
      }
    </style>

    <!-- Enhanced Main Menu Background Script -->
    <script>
      // Dynamic particle creation for main menu
      function createMenuParticles() {
        const particleField = document.querySelector('.particle-field');
        if (!particleField) return;

        // Create additional floating particles
        for (let i = 0; i < 15; i++) {
          const particle = document.createElement('div');
          particle.className = 'dynamic-particle';
          particle.style.cssText = `
            position: absolute;
            width: ${Math.random() * 4 + 2}px;
            height: ${Math.random() * 4 + 2}px;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.8), transparent);
            border-radius: 50%;
            top: ${Math.random() * 100}%;
            left: ${Math.random() * 100}%;
            animation: floatParticle ${8 + Math.random() * 4}s ease-in-out infinite;
            animation-delay: ${Math.random() * 3}s;
            pointer-events: none;
          `;
          particleField.appendChild(particle);
        }

        // Add CSS animation
        const style = document.createElement('style');
        style.textContent = `
          @keyframes floatParticle {
            0%, 100% { 
              transform: translateY(0px) translateX(0px) scale(1); 
              opacity: 0.3;
            }
            25% { 
              transform: translateY(-20px) translateX(10px) scale(1.2); 
              opacity: 0.8;
            }
            50% { 
              transform: translateY(-10px) translateX(-15px) scale(0.8); 
              opacity: 0.6;
            }
            75% { 
              transform: translateY(-30px) translateX(5px) scale(1.1); 
              opacity: 0.9;
            }
          }
          
          .dynamic-particle {
            filter: blur(0.5px);
          }
        `;
        document.head.appendChild(style);
      }

      // Initialize menu particles when main menu is visible
      document.addEventListener('DOMContentLoaded', function() {
        setTimeout(createMenuParticles, 500);
        
        // Add subtle mouse interaction to floating gems
        const floatingGems = document.querySelectorAll('.floating-gem');
        floatingGems.forEach(gem => {
          gem.addEventListener('mouseenter', function() {
            this.style.transform = 'scale(1.2) rotate(15deg)';
            this.style.textShadow = `0 0 30px ${this.style.getPropertyValue('--color')}`;
          });
          
          gem.addEventListener('mouseleave', function() {
            this.style.transform = '';
            this.style.textShadow = `0 0 20px ${this.style.getPropertyValue('--color')}`;
          });
        });
        
        // Add click ripple effect to menu buttons
        const menuButtons = document.querySelectorAll('.menu-btn');
        menuButtons.forEach(button => {
          button.addEventListener('click', function(e) {
            const ripple = document.createElement('div');
            const rect = this.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;
            
            ripple.style.cssText = `
              position: absolute;
              width: ${size}px;
              height: ${size}px;
              left: ${x}px;
              top: ${y}px;
              background: radial-gradient(circle, rgba(255, 215, 0, 0.4), transparent);
              border-radius: 50%;
              transform: scale(0);
              animation: rippleEffect 0.6s ease-out;
              pointer-events: none;
              z-index: 0;
            `;
            
            this.appendChild(ripple);
            
            setTimeout(() => {
              if (ripple.parentNode) {
                ripple.parentNode.removeChild(ripple);
              }
            }, 600);
          });
        });
        
        // Add ripple CSS
        const rippleStyle = document.createElement('style');
        rippleStyle.textContent = `
          @keyframes rippleEffect {
            to {
              transform: scale(2);
              opacity: 0;
            }
          }
        `;
        document.head.appendChild(rippleStyle);
      });
    </script>
  </body>
</html> 