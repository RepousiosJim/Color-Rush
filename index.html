<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Elemental Bejeweled - Match-3 Puzzle Game</title>
    <link rel="stylesheet" href="styles.css" />
    <meta name="description" content="Play the ultimate elemental match-3 puzzle game with beautiful gems and smooth gameplay">
    <meta name="keywords" content="elemental, bejeweled, match3, puzzle, gems, elements">
    
    <!-- Preload key resources -->
    <link rel="preload" href="script.js" as="script">
  </head>
  <body>
    <div class="game-container">
      <!-- Game Title -->
      <h1 class="game-title">⚡ Elemental Bejeweled ⚡</h1>
      <p class="game-subtitle">Match Elements • Score Points • Level Up</p>
      
      <!-- Game Statistics (will be populated by JavaScript) -->
      <div class="game-stats">
        <!-- Stats will be dynamically created by JavaScript -->
      </div>
      
      <!-- Game Board -->
      <div class="game-board" id="gameBoard">
        <!-- Elemental gems will be dynamically generated by JavaScript -->
      </div>
      
      <!-- Game Controls -->
      <div class="game-controls">
        <button class="btn btn-primary" onclick="restartGame()">
          🔄 New Game
        </button>
        <button class="btn btn-secondary" onclick="showInstructions()">
          📜 How to Play
        </button>
      </div>
      
      <!-- Simplified Instructions -->
      <div id="instructions" class="instructions" style="display: none;">
        <h3>⚡ How to Play Elemental Bejeweled</h3>
        
        <p><strong>🎯 Basic Rules:</strong></p>
        <ul>
          <li>🔄 <strong>Swap adjacent gems</strong> to create matches of 3 or more identical elements</li>
          <li>🎯 <strong>Reach target scores</strong> to advance through levels</li>
          <li>💎 <strong>Create bigger matches</strong> for higher scores and combo multipliers</li>
          <li>⚡ <strong>Chain reactions</strong> occur when new gems fall and create more matches</li>
        </ul>
        
        <p><strong>🌍 Elemental Gems:</strong></p>
        <ul>
          <li>🔥 <strong>Fire:</strong> Blazing red-orange gem with fiery energy</li>
          <li>💧 <strong>Water:</strong> Cool blue gem flowing with liquid power</li>
          <li>🌍 <strong>Earth:</strong> Solid brown gem representing stability</li>
          <li>💨 <strong>Air:</strong> Light blue gem with ethereal properties</li>
          <li>⚡ <strong>Lightning:</strong> Golden gem crackling with electricity</li>
          <li>🌿 <strong>Nature:</strong> Green gem full of life and growth</li>
          <li>🔮 <strong>Magic:</strong> Purple gem containing mystical forces</li>
        </ul>
        
        <p><strong>🏆 Scoring System:</strong></p>
        <ul>
          <li>💎 <strong>3-match:</strong> 50 points base score</li>
          <li>💎 <strong>4-match:</strong> 150 points for longer matches</li>
          <li>💎 <strong>5+ match:</strong> 300+ points for massive combinations</li>
          <li>🔥 <strong>Combo Multiplier:</strong> Each cascade increases your multiplier</li>
          <li>🎯 <strong>Level Targets:</strong> Reach the score goal to advance</li>
        </ul>
        
        <p><strong>🕹️ Controls:</strong></p>
        <ul>
          <li>🖱️ <strong>Click to Select:</strong> Click any gem to select it</li>
          <li>🔄 <strong>Click to Swap:</strong> Click an adjacent gem to swap positions</li>
          <li>❌ <strong>Deselect:</strong> Click the same gem again to deselect</li>
          <li>🔄 <strong>New Game:</strong> Restart with a fresh board anytime</li>
        </ul>
      </div>
    </div>

    <!-- Load the main game script -->
    <script src="script.js"></script>
    
    <!-- Enhanced UI functions -->
    <script>
      function showInstructions() {
        const instructions = document.getElementById('instructions');
        if (instructions.style.display === 'none') {
          instructions.style.display = 'block';
          instructions.style.cssText = `
            display: block;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(145deg, rgba(26, 26, 58, 0.98), rgba(13, 13, 26, 0.95));
            border: 3px solid rgba(255, 255, 255, 0.4);
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            color: #f0f0f0;
            box-shadow: 0 25px 50px rgba(0,0,0,0.7);
            backdrop-filter: blur(15px);
            z-index: 1000;
            text-align: left;
            font-family: Georgia, serif;
          `;
          
          // Add close button
          if (!instructions.querySelector('.close-btn')) {
            const closeBtn = document.createElement('button');
            closeBtn.className = 'close-btn';
            closeBtn.innerHTML = '✕';
            closeBtn.style.cssText = `
              position: absolute;
              top: 15px;
              right: 20px;
              background: linear-gradient(145deg, #ff4757, #ff3742);
              border: none;
              color: white;
              font-size: 18px;
              cursor: pointer;
              padding: 8px 12px;
              border-radius: 50%;
              box-shadow: 0 4px 8px rgba(0,0,0,0.3);
              transition: all 0.3s ease;
            `;
            closeBtn.onmouseover = () => {
              closeBtn.style.transform = 'scale(1.1)';
              closeBtn.style.boxShadow = '0 6px 12px rgba(0,0,0,0.4)';
            };
            closeBtn.onmouseout = () => {
              closeBtn.style.transform = 'scale(1)';
              closeBtn.style.boxShadow = '0 4px 8px rgba(0,0,0,0.3)';
            };
            closeBtn.onclick = () => {
              instructions.style.display = 'none';
            };
            instructions.appendChild(closeBtn);
          }
        } else {
          instructions.style.display = 'none';
        }
      }
      
      // Close instructions when clicking outside
      document.addEventListener('click', function(event) {
        const instructions = document.getElementById('instructions');
        if (instructions.style.display === 'block' && 
          !instructions.contains(event.target) && 
          !event.target.classList.contains('btn-secondary')) {
          instructions.style.display = 'none';
        }
      });
      
      // Enhanced performance monitoring
      window.addEventListener('load', function() {
        const loadTime = performance.now();
        console.log(`⚡ Elemental Bejeweled loaded in ${loadTime.toFixed(2)}ms`);
        
        // Add loading animation fade out
        document.body.style.opacity = '0';
        document.body.style.transition = 'opacity 0.5s ease-in';
        setTimeout(() => {
          document.body.style.opacity = '1';
        }, 100);
      });
      
      // Keyboard shortcuts
      document.addEventListener('keydown', function(event) {
        if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') return;
        
        switch(event.key.toLowerCase()) {
          case 'r': if (typeof restartGame !== 'undefined') restartGame(); break;
          case 'h': showInstructions(); break;
        }
      });
    </script>
    
    <style>
      /* Enhanced instructions styling */
      .instructions h3 {
        color: #FFD700;
        margin-bottom: 20px;
        font-size: 1.4em;
        text-align: center;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
      }
      
      .instructions ul {
        margin: 15px 0;
        padding-left: 25px;
      }
      
      .instructions li {
        margin: 10px 0;
        line-height: 1.5;
        font-size: 14px;
      }
      
      .instructions p {
        margin: 15px 0;
        font-weight: bold;
        font-size: 16px;
      }
      
      .instructions p:nth-of-type(1) { color: #87CEEB; }
      .instructions p:nth-of-type(2) { color: #FF69B4; }
      .instructions p:nth-of-type(3) { color: #98FB98; }
      .instructions p:nth-of-type(4) { color: #DDA0DD; }
      
      /* Custom scrollbar for instructions */
      .instructions::-webkit-scrollbar {
        width: 8px;
      }
      
      .instructions::-webkit-scrollbar-track {
        background: rgba(255,255,255,0.1);
        border-radius: 4px;
      }
      
      .instructions::-webkit-scrollbar-thumb {
        background: linear-gradient(145deg, #667eea, #764ba2);
        border-radius: 4px;
      }
      
      .instructions::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(145deg, #764ba2, #667eea);
      }
    </style>
  </body>
</html> 